name = "gaado-backend"
main = "main.py"
compatibility_date = "2024-01-01"
compatibility_flags = ["python_workers"]

# Python version (Cloudflare Workers requires Python 3.11+)
# Note: Cloudflare Workers automatically uses Python 3.11+
# Wrangler will automatically detect and use requirements.txt

# D1 Database Configuration
# Create D1 database: wrangler d1 create gaado-db
# Database ID will be shown after creation
# Then bind it to your worker:
[[d1_databases]]
binding = "DB"
database_name = "gaado-db"
database_id = "YOUR_DATABASE_ID_HERE"  # Replace with your actual database ID

[env.production]
name = "gaado-backend"
[[env.production.d1_databases]]
binding = "DB"
database_name = "gaado-db"
database_id = "YOUR_PRODUCTION_DATABASE_ID_HERE"  # Replace with production database ID

[env.staging]
name = "gaado-backend-staging"
[[env.staging.d1_databases]]
binding = "DB"
database_name = "gaado-db-staging"
database_id = "YOUR_STAGING_DATABASE_ID_HERE"  # Replace with staging database ID

# Python runtime configuration
# Note: Cloudflare Workers for Python requires Python 3.11+
# Dependencies are automatically installed from requirements.txt
# Note: Some packages in requirements.txt are marked for local dev only and won't be used in Workers

# Environment variables (set via Cloudflare dashboard or wrangler secret)
# Hugging Face Configuration
# HUGGINGFACE_API_TOKEN - set via: wrangler secret put HUGGINGFACE_API_TOKEN
# HUGGINGFACE_MODEL - optional, defaults to sentiment analysis model
# HUGGINGFACE_API_URL - optional, defaults to https://api-inference.huggingface.co/models

# ChromaDB Configuration
# For Cloudflare Workers, use ChromaDB Cloud or external instance:
# CHROMA_API_URL - set via: wrangler secret put CHROMA_API_URL
# CHROMA_API_KEY - set via: wrangler secret put CHROMA_API_KEY
# CHROMA_COLLECTION_NAME - optional, defaults to "gaado_documents"
# EMBEDDING_MODEL - optional, defaults to "sentence-transformers/all-MiniLM-L6-v2"

# Note: ChromaDB requires external instance for Cloudflare Workers deployment
# Local file-based ChromaDB won't work in Workers environment

